datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id                 Int                  @id @default(autoincrement())
  stravaId           Int                  @unique
  username           String               @unique
  name               String?
  accountBalance     Int                  @default(0)
  collectedCards     Int                  @default(0)
  inAppSince         DateTime             @default(now())
  lastActive         DateTime             @default(now())
  stravaRefreshToken StravaRefreshToken[]
  stravaAccessToken  StravaAccessToken[]
}

model StravaRefreshToken {
  user             User    @relation(fields: [userStravaId], references: [stravaId])
  userStravaId     Int
  refreshTokenCode String  @unique
  scope            Boolean
}

model StravaAccessToken {
  user            User     @relation(fields: [userStravaId], references: [stravaId])
  userStravaId    Int
  accessTokenCode String   @unique
  expiresAt       DateTime
}
